---
name: Контрольная работа по второму дедлайну
tags:
  - test
  - python
  - mermaid
---
## Контрольная работа по второму дедлайну

**Цель работы:** Продемонстрировать навыки работы со сложными структурами данных, алгоритмическим мышлением и написанием структурированного кода с использованием функций.

**Задачи работы:**
1. Написать решение для задания вашего варианта [[Варианты]].
2. Для задач с функциями **обязательно** использовать:
   - Аннотации типов (`type hinting`) для аргументов и возвращаемых значений.
   - Строки документации (`docstrings`) с описанием того, что функция делает, что принимает и что возвращает.

**Критерии оценки:**
1. **Алгоритм (2 балла):** Задача решена верно, учтены граничные случаи.
2. **Структуры данных (1 балл):** Выбраны правильные типы данных (словарь для поиска, множество для уникальности и т.д.).
3. **Оформление (1 балл):** Код соответствует PEP8, переменные названы понятно.
4. **Функциональный стиль (1 балл):** Использованы аннотации типов и docstring (для соответствующих вариантов).

### Практическая часть

#### Вариант 1 (Вложенные структуры данных)

**Задача «Анализ успеваемости».**
Дан словарь, где ключом является имя ученика, а значением — другой словарь с предметами и списками оценок.
```python
students = {
    "Alice": {"Math": [4, 5, 5], "Physics": [4, 3], "CS": [5, 5, 5]},
    "Bob": {"Math": [3, 4], "Physics": [3, 3], "CS": [4, 3]},
    "Charlie": {"Math": [5, 5], "Physics": [4, 5], "CS": [5, 5]}
}
```

**Задание:**
1. Напишите программу, которая вычисляет средний балл по каждому предмету для каждого ученика.
2. Отфильтруйте и сформируйте список учеников, претендующих на **золотую медаль**. Условия:
   - Средний балл по **CS (информатике)** должен быть ровно 5.0.
   - Ни одной оценки ниже 4 по всем предметам.
3. Выведите итоговый список медалистов с их общим средним баллом по всем предметам.

#### Вариант 2 (Обработка логов и Списки)

**Задача «Анализатор Web-сервера».**
Дан список строк, имитирующий лог-файл сервера (формат упрощенный):
```python
logs = [
    "192.168.1.1 - GET /index.html 200",
    "192.168.1.5 - GET /about 404",
    "192.168.1.1 - POST /login 200",
    "10.0.0.1 - GET /admin 500",
    # ...
]
```

**Задание:**
1. Пропарсить строки. Посчитать общее количество запросов с кодами **200**, **404** и **500** (использовать словарь).
2. Найти IP-адрес, с которого пришло **наибольшее** количество запросов (независимо от статуса).
3. Сформировать список «подозрительных» IP, которые получали код ошибки **404** или **500** более N раз (N задайте переменной, например 3).

#### Вариант 3 (Множества и Логика)

**Задача «Система контроля доступа».**
Есть три группы пользователей (хранятся в множествах `set`):
- `admins`: Администраторы.
- `editors`: Редакторы контента.
- `banned`: Заблокированные пользователи.

Поступает список попыток входа `access_attempts = ["user1", "user5", "admin_bob", ...]`.

**Задание:**
1. Определить пользователей, которые являются одновременно и администраторами, и редакторами (супер-пользователи).
2. Найти пользователей из списка попыток входа, которые есть в списке `banned`, но при этом **не** являются администраторами (админов банить нельзя, даже если они в списке бана — это ошибка системы).
3. Вывести список пользователей, которые пытались войти, но не имеют ни одной роли (ни админ, ни редактор).

#### Вариант 4 (Геометрия и Кортежи)

**Задача «Анализ GPS-трека».**
Дан список кортежей с координатами точек маршрута `(x, y)`:
`route = [(0, 0), (2, 4), (5, 8), (10, 8), (12, 5)]`

**Задание:**
1. Рассчитать общую длину маршрута (сумму расстояний между соседними точками). Формула: $\sqrt{(x_2-x_1)^2 + (y_2-y_1)^2}$.
2. Найти **самый длинный перегон** (участок между двумя соседними точками). Вывести координаты начала и конца этого участка и его длину.
3. Определить, замкнут ли маршрут (совпадают ли первая и последняя точки).

#### Вариант 5 (Функции и распаковка `*args`)

**Задача «Кассовый аппарат».**
Напишите функцию `print_receipt`, которая формирует чек.
1. Функция принимает первым аргументом дату (строку).
2. Далее принимает произвольное количество товаров в виде кортежей `(название, цена, количество)`. Пример: `("Хлеб", 50, 2)`.
3. Принимает именованный аргумент `discount` (скидка в %, по умолчанию 0).

**Задание:**
Функция должна вывести в консоль красиво оформленный чек:
- Шапка с датой.
- Список товаров: `Название ...... 2 x 50 = 100`.
- Промежуточный итог.
- Сумма скидки.
- **Итоговая сумма к оплате.**

#### Вариант 6 (Функции и `**kwargs`)

**Задача «Генератор SQL-запросов».**
Напишите функцию `build_query`, которая помогает создавать SQL-запросы к базе данных.
1. Обязательные аргументы: `table_name` (имя таблицы), `columns` (список столбцов, которые нужно получить).
2. Произвольные именованные аргументы (`**kwargs`) используются для фильтрации (WHERE).

**Задание:**
Пример вызова:
```python
build_query("users", ["name", "email"], age=25, city="Moscow", status="active")
```
Функция должна вернуть строку:
`SELECT name, email FROM users WHERE age=25 AND city='Moscow' AND status='active';`
*Обратите внимание: если значение строковое, оно должно быть в кавычках, если числовое — без.*

#### Вариант 7 (Сложные циклы While)

**Задача «Инфляция vs Инвестиции».**
Пользователь хочет накопить на машину стоимостью `car_price`.
1. У него есть стартовый капитал `deposit`.
2. Каждый месяц он откладывает зарплату `salary`.
3. Деньги лежат в банке под `bank_percent` % **годовых** (начисляются ежемесячно, то есть `bank_percent / 12`).
4. Но цена машины растет каждый месяц на `inflation_percent` %.
**Задание:**
Напишите программу с циклом `while`, которая рассчитает, через сколько месяцев накопленная сумма превысит стоимость машины. Вывести количество месяцев и итоговую разницу сумм. Если копить придется более 20 лет — вывести "Мечта недостижима".

#### Вариант 8 (Словари, Списки и Функции)

**Задача «Складской учет».**
Дана структура склада (список словарей):
```python
stock = [
    {"id": 1, "name": "Laptop", "price": 50000, "qty": 10},
    {"id": 2, "name": "Mouse", "price": 1500, "qty": 50},
    # ...
]
```
Напишите функцию `process_orders(stock_list, orders_list)`.
Аргумент `orders_list` — это список заказов вида `[{"id": 1, "count": 2}, {"id": 2, "count": 100}]`.

**Задание:**
1. Пройтись по заказам. Если товара на складе достаточно — уменьшить поле `qty` и добавить стоимость в выручку.
2. Если товара не хватает (запросили 100, а есть 50) — **не продавать ничего** из этого пункта заказа и добавить заказ в список "Отменено".
3. Функция должна вернуть кортеж: `(общая_выручка, обновленный_склад, список_отмененных_заказов)`.

#### Вариант 9 (Вложенные циклы и Матрицы)

**Задача «Бронирование в кинотеатре».**
Дан зал кинотеатра в виде списка списков (матрица), где `0` — свободно, `1` — занято.
```python
cinema_hall = [
    [0, 1, 1, 0, 0, 0],
    [0, 0, 0, 1, 1, 1],
    [1, 1, 0, 0, 0, 1]
]
```
Пользователь запрашивает `k` билетов на соседние места в одном ряду.

**Задание:**
1. Напишите алгоритм, который находит первый подходящий ряд и места (например, нужно 3 места подряд).
2. Если места найдены, программа должна вывести: "Ряд X, места с Y по Z".
3. Если места не найдены, предложить пользователю разбить компанию (просто вывести "Вместе не сесть").

#### Вариант 10 (Строки и Частотный анализ)

**Задача «Дешифратор и Статистика».**
Дана зашифрованная строка (большой текст), состоящая из букв и мусора (цифры, знаки).

**Задание:**
1. Очистить строку: оставить только латинские буквы. Привести всё к нижнему регистру.
2. Подсчитать частоту встречаемости каждой буквы (в процентах от общего количества букв).
3. Найти **топ-3** самых частых букв.
4. Проверить гипотезу: если самая частая буква — это 'e', вывести "Вероятно, английский язык". Иначе — "Язык не определен".